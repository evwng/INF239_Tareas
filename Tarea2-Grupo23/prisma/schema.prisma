// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema


//To migrate this file use the command: npx prisma migrate dev
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model personajes {
  id                       Int                       @id @default(autoincrement())
  nombre                   String                    @db.VarChar(45)
  fuerza                   Int
  fecha_nacimiento         DateTime
  objeto                   String?                   @db.VarChar(30)
  personaje_habita_reinos  personaje_habita_reino[]
  personaje_tiene_trabajos personaje_tiene_trabajo[] 
  kart                     karts[]
}

model reinos {
  id                Int           @id @default(autoincrement())
  nombre            String        @db.VarChar(45)
  ubicacion         String        @db.VarChar(45)
  superficie        Int
  defensas          defensas[]
  diplomacias       diplomacias[]
}

model personaje_habita_reino {
  personaje        personajes @relation(fields: [id_personaje], references: [id])
  id_personaje     Int 
  reino            reinos     @relation(fields: [id_reino], references: [id])
  id_reino         Int 
  fecha_registro   DateTime
  es_gobernante    Boolean
  
  @@id([id_personaje, id_reino])
}

model karts{
  id                 Int         @id @default(autoincrement())
  modelo             String      @db.VarChar(45)
  color              String      @db.VarChar(45)
  velocidad_maxima   Int?
  personaje          personajes? @relation(fields: [id_personaje], references: [id]) 
  id_personaje       Int      
}

model trabajos {
  id                        Int                       @id @default(autoincrement())
  descripcion               String?                   @db.VarChar(45)
  sueldo                    Int
  personajes_tienen_trabajo personaje_tiene_trabajo[]
}

model personaje_tiene_trabajo {
  trabajo       trabajos   @relation(fields: [id_trabajo], references: [id])
  id_trabajo    Int
  personaje     personajes @relation(fields: [id_personaje], references: [id])
  id_personaje  Int
  fecha_inicio  DateTime
  fecha_termino DateTime?

  @@id([id_personaje, id_trabajo])
}

model diplomacias{
  reino_1      reinos  @relation(fields: [id_reino_1], references: [id])
  reino_2      reinos  @relation(fields: [id_reino_2], references: [id])
  id_reino_1   Int
  id_reino_2   Int
  es_aliado    Boolean

  @@id([id_reino_1, id_reino_2])
}

model defensas{
  id      Int      @id @default(autoincrement())
  defensa String   @db.VarChar(45)
  reino   reinos[]  
}