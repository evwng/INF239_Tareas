// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema
//To migrate this file use the command: npx prisma migrate dev

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Defensas{
  id      Int      @id @default(autoincrement())
  defensa String   @db.VarChar(45)
  reinos  Reinos[]
}

model Diplomacias{
  reino_1      Reinos  @relation("Reino_1", fields: [id_reino_1], references: [id])
  id_reino_1   Int
  reino_2      Reinos  @relation("Reino_2", fields: [id_reino_2], references: [id])
  id_reino_2   Int
  es_aliado    Boolean
  @@id([id_reino_1, id_reino_2])
}

model Karts{
  id                 Int         @id @default(autoincrement())
  modelo             String      @db.VarChar(45)
  color              String      @db.VarChar(45)
  velocidad_maxima   Int?
  personaje          Personajes? @relation(fields: [id_personaje], references: [id])
  id_personaje       Int
}

model Personajes {
  id                 Int                       @id @default(autoincrement())
  nombre             String                    @db.VarChar(45)
  fuerza             Int
  fecha_nacimiento   DateTime                  @default(now())
  objeto             String?                   @db.VarChar(30)
  personaje_karts    Karts[]
  personaje_reinos   Personaje_habita_reino[]
  personaje_trabajos Personaje_tiene_trabajo[]
}

model Personaje_habita_reino {
  personaje        Personajes @relation(fields: [id_personaje], references: [id])
  id_personaje     Int 
  reino            Reinos     @relation(fields: [id_reino], references: [id])
  id_reino         Int
  fecha_registro   DateTime
  es_gobernante    Boolean
  @@id([id_personaje, id_reino])
}

model Personaje_tiene_trabajo {
  trabajo       Trabajos   @relation(fields: [id_trabajo], references: [id])
  id_trabajo    Int
  personaje     Personajes @relation(fields: [id_personaje], references: [id])
  id_personaje  Int
  fecha_inicio  DateTime
  fecha_termino DateTime?
  @@id([id_personaje, id_trabajo])
}

model Reinos {
  id                  Int                      @id @default(autoincrement())
  nombre              String                   @db.VarChar(45)
  ubicacion           String                   @db.VarChar(45)
  superficie          Int
  defensas            Defensas[]
  reino_1_diplomacias Diplomacias[]            @relation("Reino_1")
  reino_2_diplomacias Diplomacias[]            @relation("Reino_2")
  reino_personajes    Personaje_habita_reino[]
}

model Trabajos {
  id                 Int                       @id @default(autoincrement())
  descripcion        String?                   @db.VarChar(45)
  sueldo             Int
  trabajo_personajes Personaje_tiene_trabajo[]
}